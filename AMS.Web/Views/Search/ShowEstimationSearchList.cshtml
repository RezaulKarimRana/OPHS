@model IEnumerable<AMS.Models.ViewModel.EstimateSearchVM>
@using System.Globalization
@using AMS.Common.Helpers

@{
    ViewData["Title"] = "ShowEstimationSearchList";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}
<div class="card shadow mb-4">
    <div class="card-header">

        <a id="btnReloadData" href="#" class="float-left">
            <span class="">
                Searched Estimation
            </span>
        </a>
        <a id="btnReloadData" href="#" class="btn btn-primary float-right">
            <span class="icon text-white">
                <i class="fas fa-sync"></i>
            </span>
        </a>
    </div>
    <div class="card-body">
        <div class="datatable">
            <div class="col-sm-12">
                <table class="table table-bordered table-striped" id="dataTable">
                    <thead class="thead-dark">
                        <tr>
                            <th>
                                Estimate Type
                            </th>
                            <th>
                                Identity
                            </th>
                            <th>
                                Subject
                            </th>
                            <th>
                                Start Date
                            </th>
                            <th>
                                End Date
                            </th>
                            <th>
                                Createdy By
                            </th>
                            <th>
                                Total Price
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody style="text-align: left">
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @item.EstimationTypeName
                                </td>
                                <td>
                                    @item.EstimateIdentity
                                    @{
                                        if (item.EstimationStatus == "2")
                                        {
                                            <span class='w3-tag w3-yellow'>Pending</span>
                                        }
                                        else if (item.EstimationStatus == "100")
                                        {
                                            <span class='w3-tag w3-green'>Completed</span>
                                        }
                                        else if (item.EstimationStatus == "-404")
                                        {
                                            <span class='w3-tag w3-deep-orange'>Rollbacked</span>
                                        }
                                        else if (item.EstimationStatus == "-500")
                                        {
                                            <span class='w3-tag w3-red'>Rejected</span>
                                        }
                                    }
                                </td>
                                <td>
                                    @item.EstimateSubject
                                </td>
                                <td>
                                    @item.StartDate.ToString("MM/dd/yyyy")
                                </td>
                                <td>
                                    @item.EndDate.ToString("MM/dd/yyyy")
                                </td>
                                <td>
                                    @item.CreateorFullName
                                </td>
                                <td>
                                    @item.TotalPrice.ToString() @Utility.CurrencyTypeConvertToStringFormat(item.CurrencyType)
                                </td>
                                <td>
                                    <a href="/BudgetEstimation/ViewEstimation?id=@item.Id" class='text-decoration-none'>
                                        <i class='fas fa-eye' data-toggle='tooltip' data-placement='left' title='View'></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
@section Scripts{

    <script>
        function dataTableRender() {
            $('#dataTable').dataTable({
                searchHighlight: true
            });
        }

        $(document).ready(function () {
            dataTableRender();
        });

    </script>
}